{% extends 'layouts/app.html' %}

{% block content %}

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
    {% endfor %}
  {% endif %}
{% endwith %}

<div class="container">
    <div class="row mt-4 justify-content-center">
        <div class="col-sm-8">
            <form action="/" method="POST">
                <div class="input-group mb-3">
                    <input type="text" name="title" placeholder="Enter title" class="form-control" value="{{ edit_todo.title if edit_todo else '' }}">
                    <div class="input-group-append">
                        <button class="btn btn-dark" type="submit">Save</button>
                    </div>
                </div>
            </form>

            {% for todo in todos %}
            <div class="row mt-2">
                <div class="col-8">{{ todo.title }}</div>
                <div class="col-4 text-right">
                    <a href="{{ url_for('edit', todo_id=todo.id) }}" class="btn btn-dark btn-sm">Edit</a>
                    <a href="{{ url_for('delete', todo_id=todo.id) }}" class="btn btn-danger btn-sm">Delete</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

{% endblock %}
